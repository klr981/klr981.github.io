<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, user-scalable=no">
  <meta name="description" content="API docs for the keyMessageHandler property from the KeyEventManager class, for the Dart programming language.">
  <title>keyMessageHandler property - KeyEventManager class - services library - Dart API</title>

  <!-- required because all the links are pseudo-absolute -->
  <base href="../../">

  
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,300;0,400;0,500;0,700;1,400&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="static-assets/github.css?v1">
  <link rel="stylesheet" href="static-assets/styles.css?v1">
  <link rel="icon" href="static-assets/favicon.png?v1">

  <!-- style overrides for dartdoc -->
<style>
@import 'https://fonts.googleapis.com/css?family=Roboto:500,400italic,300,400,100i';
@import 'https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round';
</style>

<link href="https://flutter.github.io/assets-for-api-docs/assets/cupertino/cupertino.css" rel="stylesheet" type="text/css">

<link href="../assets/overrides.css" rel="stylesheet" type="text/css">

<link href="https://fonts.googleapis.com/icon?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Sharp|Material+Icons+Round" rel="stylesheet">
<style>
  /* Rule for sizing the icon. */
  .md-36 { font-size: 36px; }
</style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67589403-1', 'auto');
  ga('send', 'pageview');
</script>

<script async="" defer="" src="../assets/api_survey.js"></script>

<!-- Styles and scripting for handling custom code snippets -->
<link href="../assets/snippets.css" rel="stylesheet" type="text/css">
<script src="../assets/snippets.js"></script>

<link rel="search" type="application/opensearchdescription+xml" title="Flutter API" href="/opensearch.xml"/>

</head>


<body data-base-href="../../" data-using-base-href="true">

<div id="overlay-under-drawer"></div>

<header id="title">
  <button id="sidenav-left-toggle" type="button">&nbsp;</button>
  <ol class="breadcrumbs gt-separated dark hidden-xs">
    <li><a href="index.html">Flutter</a></li>
    <li><a href="services/services-library.html">services</a></li>
    <li><a href="services/KeyEventManager-class.html">KeyEventManager</a></li>
    <li class="self-crumb">keyMessageHandler property</li>
  </ol>
  <div class="self-name">keyMessageHandler</div>
  <form class="search navbar-right" role="search">
    <input type="text" id="search-box" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
<!--  <div class="temp-box"></div>-->
<!--  <i class="fa fa-sun-o" style="font-size:24px;"></i>  <div class="toggle" id="theme-button">-->
<!--    <label for="theme" class="switch">-->
<!--      <input type="checkbox" id="theme" value="light">-->
<!--      <span class="slider round"></span>-->
<!--    </label>-->
<!--  </div>-->
<!--  <i class="fa fa-moon-o"  style="font-size:24px;"></i>-->
</header>
<main>


  <div id="dartdoc-main-content" class="main-content">
      <div>
  <div id="external-links" class="btn-group"><a title="View source code" class="source-link" href="https://github.com/flutter/flutter/blob/master/packages/flutter/lib/src/services/hardware_keyboard.dart#L824"><i class="material-icons">description</i></a></div>
<h1><span class="kind-property">keyMessageHandler</span> property 
    <a href="https://dart.dev/null-safety" class="feature feature-null-safety" title="Supports the null safety language feature.">Null safety</a>
</h1></div>

        <section class="multi-line-signature">
          <a href="services/KeyMessageHandler.html">KeyMessageHandler</a>?
          <span class="name ">keyMessageHandler</span>
          <div class="features">read / write</div>

        </section>
        
<section class="desc markdown">
  <p>The global entrance which handles all key events sent to Flutter.</p>
<p>Typical applications use <a href="widgets/WidgetsBinding-mixin.html">WidgetsBinding</a>, where this field is
set by the focus system (see <code>FocusManger</code>) on startup to a function that
dispatches incoming events to the focus system, including
<code>FocusNode.onKey</code>, <code>FocusNode.onKeyEvent</code>, and <code>Shortcuts</code>. In this case,
the application does not need to read, assign, or invoke this value.</p>
<p>For advanced uses, the application can "patch" this callback. See below
for details.</p>
<h2 id="handlers-and-event-results">Handlers and event results</h2>
<p>Roughly speaking, Flutter processes each native key event with the
following phases:</p>
<ol>
<li>Platform-side pre-filtering, sometimes used for IME.</li>
<li>The key event system.</li>
<li>The text input system.</li>
<li>Other native components (possibly non-Flutter).</li>
</ol>
<p>Each phase will conclude with a boolean called an "event result". If the
result is true, this phase <em>handles</em> the event and prevents the event
from being propagated to the next phase. This mechanism allows shortcuts
such as "Ctrl-C" to not generate a text "C" in the text field, or
shortcuts that are not handled by any components to trigger special alerts
(such as the "bonk" noise on macOS).</p>
<p>In the second phase, known as "the key event system", the event is dispatched
to several destinations: <a href="services/RawKeyboard-class.html">RawKeyboard</a>'s listeners,
<a href="services/HardwareKeyboard-class.html">HardwareKeyboard</a>'s handlers, and <a href="services/KeyEventManager/keyMessageHandler.html">keyMessageHandler</a>.
All destinations will always receive the event regardless of the handlers'
results. If any handler's result is true, then the overall result of the
second phase is true, and event propagation is stopped.</p>
<p>See also:</p>
<ul>
<li><a href="services/RawKeyboard/addListener.html">RawKeyboard.addListener</a>, which adds a raw keyboard listener.</li>
<li><a href="widgets/RawKeyboardListener-class.html">RawKeyboardListener</a>, which is also implemented by adding a raw
keyboard listener.</li>
<li><a href="services/HardwareKeyboard/addHandler.html">HardwareKeyboard.addHandler</a>, which adds a hardware keyboard handler.</li>
</ul>
<h2 id="advanced-usages-manual-assignment-or-patching">Advanced usages: Manual assignment or patching</h2>
<p>If you are not using the focus system to manage focus, set this
attribute to a <a href="services/KeyMessageHandler.html">KeyMessageHandler</a> that returns true if the propagation
on the platform should not be continued. If this field is null, key events
will be assumed to not have been handled by Flutter, a result of "false".</p>
<p>Even if you are using the focus system, you might also want to do more
than the focus system allows. In these cases, you can <em>patch</em>
<a href="services/KeyEventManager/keyMessageHandler.html">keyMessageHandler</a> by setting it to a callback that performs your tasks
and calls the original callback in between (or not at all.)</p>
<p>Patching <a href="services/KeyEventManager/keyMessageHandler.html">keyMessageHandler</a> can not be reverted. You should always assume
that another component might haved patched it before you and after you.
This means that you might want to write your own global notification
manager, to which callbacks can be added and removed.</p>
<p>You should not patch <a href="services/KeyEventManager/keyMessageHandler.html">keyMessageHandler</a> until the <code>FocusManager</code> has assigned
its callback. This is assured during any time within the widget lifecycle
(such as <code>initState</code>), or after calling <code>WidgetManager.instance</code>.</p>
<p>
<a name="services.KeyEventManager.keyMessageHandler.1"></a>
<div class="anchor-container">
    <a class="anchor-button-overlay anchor-button" title="Copy link to clipboard"
       onmouseenter="fixHref(this, 'services.KeyEventManager.keyMessageHandler.1');"
       onclick="fixHref(this, 'services.KeyEventManager.keyMessageHandler.1'); copyStringToClipboard(this.href);"
       href="#">
        <i class="material-icons copy-image">link</i>
    </a>
</div>
<div class="snippet-container">
    <div class="snippet" id="longSnippet1">
        <div class="snippet-description">
This example shows how to process key events that are not handled by any
focus handler (such as <code>Shortcuts</code>) by patching <a href="services/KeyEventManager/keyMessageHandler.html">keyMessageHandler</a>.</p>
<p>The app prints out any key events that are not handled by the app body.
Try typing something in the first text field. These key presses are not
handled by <code>Shorcuts</code> and will be sent to the fallback handler and printed
out. Now try some text shortcuts, such as Ctrl+A. The KeyA press is
handled as a shortcut, and is not sent to the fallback handler and so is
not printed out.</p>
<p>The key widget is <code>FallbackKeyEventRegistrar</code>, a necessity class to allow
reversible patching. <code>FallbackFocus</code> and <code>FallbackFocusNode</code> are also
useful to recognize the widget tree's structure. <code>FallbackDemo</code> is an
example of using them in an app.
</div>
        <iframe class="snippet-dartpad" src="https://dartpad.dev/embed-flutter.html?split=60&run=true&null_safety=true&sample_id=services.KeyEventManager.keyMessageHandler.1&sample_channel=master"></iframe>
        <div class="snippet-description">To create a local project with this code sample, run:<br/>
            <span class="snippet-create-command">flutter create --sample=services.KeyEventManager.keyMessageHandler.1 mysample</span>
        </div>
    </div>
</div>
</p>
<p>See also:</p>
<ul>
<li><a href="services/HardwareKeyboard/addHandler.html">HardwareKeyboard.addHandler</a>, which accepts multiple global handlers
to process <a href="services/KeyEvent-class.html">KeyEvent</a>s</li>
</ul>
</section>

        
<section class="summary source-code" id="source">
  <h2><span>Implementation</span></h2>
  <pre class="language-dart"><code class="language-dart">KeyMessageHandler? keyMessageHandler;

</code></pre>
</section>


  </div> <!-- /.main-content -->

  <div id="dartdoc-sidebar-left" class="sidebar sidebar-offcanvas-left">
    <header id="header-search-sidebar" class="hidden-l">
  <form class="search-sidebar" role="search">
    <input type="text" id="search-sidebar" autocomplete="off" disabled class="form-control typeahead" placeholder="Loading search...">
  </form>
</header>

<ol class="breadcrumbs gt-separated dark hidden-l" id="sidebar-nav">
  <li><a href="index.html">Flutter</a></li>
  <li><a href="services/services-library.html">services</a></li>
  <li><a href="services/KeyEventManager-class.html">KeyEventManager</a></li>
  <li class="self-crumb">keyMessageHandler property</li>
</ol>


    <h5>KeyEventManager class</h5>
    <ol>

        <li class="section-title"><a href="services/KeyEventManager-class.html#constructors">Constructors</a></li>
          <li><a href="services/KeyEventManager/KeyEventManager.html">KeyEventManager</a></li>


        <li class="section-title">
          <a href="services/KeyEventManager-class.html#instance-properties">Properties</a>
        </li>
          <li class="inherited"><a href="dart-core/Object/hashCode.html">hashCode</a></li>
          <li><a href="services/KeyEventManager/keyMessageHandler.html">keyMessageHandler</a></li>
          <li class="inherited"><a href="dart-core/Object/runtimeType.html">runtimeType</a></li>

        <li class="section-title"><a href="services/KeyEventManager-class.html#instance-methods">Methods</a></li>
          <li><a href="services/KeyEventManager/clearState.html">clearState</a></li>
          <li><a href="services/KeyEventManager/handleKeyData.html">handleKeyData</a></li>
          <li><a href="services/KeyEventManager/handleRawKeyMessage.html">handleRawKeyMessage</a></li>
          <li class="inherited"><a href="dart-core/Object/noSuchMethod.html">noSuchMethod</a></li>
          <li class="inherited"><a href="dart-core/Object/toString.html">toString</a></li>

        <li class="section-title inherited"><a href="services/KeyEventManager-class.html#operators">Operators</a></li>
          <li class="inherited"><a href="dart-core/Object/operator_equals.html">operator ==</a></li>




</ol>

  </div><!--/.sidebar-offcanvas-->

  <div id="dartdoc-sidebar-right" class="sidebar sidebar-offcanvas-right">
  </div><!--/.sidebar-offcanvas-->

</main>

<footer>
  <span class="no-break">
    Flutter
      0.0.0
  </span>

  <script src="footer.js"></script>
</footer>



<script src="static-assets/highlight.pack.js?v1"></script>
<script src="static-assets/docs.dart.js"></script>



</body>

</html>

